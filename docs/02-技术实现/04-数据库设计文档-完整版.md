# æ•°æ®åº“è®¾è®¡æ–‡æ¡£ - å®Œæ•´ç‰ˆ

> **æœ€åæ›´æ–°**: 2025-10-13
> **æ–‡æ¡£ç‰ˆæœ¬**: v2.0
> **æ•°æ®åº“**: PostgreSQL 14 (Docker)

---

## ğŸ“Š æ¦‚è§ˆ

### æŠ€æœ¯æ ˆ
- **æ•°æ®åº“**: PostgreSQL 14 (Dockerå®¹å™¨: web3-postgres)
- **ORM**: SQLAlchemy 2.0
- **è¿ç§»å·¥å…·**: Alembic
- **è¿æ¥æ± **: SQLAlchemy Pool (pool_size=20)

### å½“å‰çŠ¶æ€
- âœ… **ä¸šåŠ¡è¡¨**: 21ä¸ª
- ğŸ“Š **ç³»ç»Ÿè¡¨**: 1ä¸ª (alembic_version)
- ğŸ’¾ **æ€»æ•°æ®é‡**: ~1.8 MB
- ğŸ“ˆ **é¡¹ç›®æ•°æ®**: 77ä¸ªé¡¹ç›®, 15ä¸ªKOL, 154æ¡æŒ‡æ ‡

---

## ğŸ“‹ è¡¨åˆ†ç±»æ¦‚è§ˆ

### æ ¸å¿ƒä¸šåŠ¡è¡¨ (4ä¸ª)
1. `projects` - é¡¹ç›®ä¸»è¡¨ (36åˆ—, 77æ¡, 384 KB)
2. `social_metrics` - ç¤¾äº¤æŒ‡æ ‡ (19åˆ—, 154æ¡, 72 KB)
3. `onchain_metrics` - é“¾ä¸ŠæŒ‡æ ‡ (20åˆ—, 154æ¡, 72 KB)
4. `ai_analysis` - AIåˆ†æ (21åˆ—, 75æ¡, 136 KB)

### ç”¨æˆ·ä¸æƒé™ (1ä¸ª)
5. `users` - ç”¨æˆ·è¡¨ (9åˆ—, 2æ¡, 112 KB)

### AIç³»ç»Ÿ (3ä¸ª)
6. `ai_configs` - AIé…ç½® (7åˆ—, 3æ¡, 48 KB)
7. `ai_work_config` - AIå·¥ä½œé…ç½® (13åˆ—, 32 KB)
8. `ai_learning_feedback` - AIå­¦ä¹ åé¦ˆ (9åˆ—, 64 KB)

### é¢„æµ‹ä¸æŠ•èµ„ (4ä¸ª)
9. `token_launch_predictions` - ä»£å¸å‘å¸é¢„æµ‹ (15åˆ—, 64 KB)
10. `airdrop_value_estimates` - ç©ºæŠ•ä»·å€¼ä¼°ç®— (14åˆ—, 56 KB)
11. `investment_action_plans` - æŠ•èµ„è¡ŒåŠ¨è®¡åˆ’ (21åˆ—, 64 KB)
12. `project_discoveries` - é¡¹ç›®å‘ç° (20åˆ—, 96 KB)

### KOLç®¡ç† (3ä¸ª)
13. `kols` - KOLåˆ—è¡¨ (24åˆ—, 15æ¡, 96 KB)
14. `kols_pending` - å¾…å®¡æ ¸KOL (18åˆ—, 32 KB)
15. `kol_performances` - KOLè¡¨ç° (10åˆ—, 32 KB)

### å®¡æ ¸ç³»ç»Ÿ (1ä¸ª)
16. `projects_pending` - å¾…å®¡æ ¸é¡¹ç›® (24åˆ—, 14æ¡, 112 KB)

### å¹³å°ç›‘æ§ (5ä¸ª)
17. `platform_search_rules` - å¹³å°æœç´¢è§„åˆ™ (13åˆ—, 48 KB)
18. `platform_daily_stats` - å¹³å°æ—¥ç»Ÿè®¡ (10åˆ—, 56 KB)
19. `twitter_keywords` - Twitterå…³é”®è¯ (9åˆ—, 72 KB)
20. `telegram_channels` - Telegramé¢‘é“ (10åˆ—, 40 KB)
21. `discord_servers` - DiscordæœåŠ¡å™¨ (12åˆ—, 40 KB)

---

## âœ… è¯¦ç»†è¡¨ç»“æ„

### æ ¸å¿ƒä¸šåŠ¡è¡¨

#### 1. projects (é¡¹ç›®ä¸»è¡¨)

**ç”¨é€”**: å­˜å‚¨Web3é¡¹ç›®çš„å®Œæ•´ä¿¡æ¯å’Œè¯„åˆ†

**å­—æ®µ** (36ä¸ª):
- **åŸºç¡€ä¿¡æ¯**: id, name, symbol, blockchain, category, description
- **ç¤¾äº¤é“¾æ¥**: website, twitter, telegram, discord, github
- **è¯„åˆ†ä½“ç³»**: overall_score, team_score, tech_score, community_score, tokenomics_score, market_timing_score, risk_score
- **è¯„çº§**: grade (S/A/B/C)
- **çŠ¶æ€**: status, first_discovered_at, last_updated_at
- **å…ƒæ•°æ®**: logo_url, social_links (JSON), key_highlights (JSON), risk_flags (JSON), metrics (JSON)

**ç´¢å¼•**:
```sql
CREATE INDEX idx_projects_grade ON projects(grade);
CREATE INDEX idx_projects_score ON projects(overall_score DESC);
CREATE INDEX idx_projects_blockchain ON projects(blockchain);
CREATE INDEX idx_projects_category ON projects(category);
```

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ (77æ¡æ•°æ®)

---

#### 2. social_metrics (ç¤¾äº¤åª’ä½“æŒ‡æ ‡)

**ç”¨é€”**: å­˜å‚¨é¡¹ç›®çš„ç¤¾äº¤åª’ä½“æ•°æ®æ—¶åºå¿«ç…§

**å­—æ®µ** (19ä¸ª):
- **Twitter**: twitter_followers, twitter_engagement_rate, twitter_growth_rate
- **Telegram**: telegram_members, telegram_active_rate, telegram_message_frequency
- **Discord**: discord_members, discord_online_ratio
- **GitHub**: github_stars, github_forks, github_commits_last_week, github_contributors
- **YouTube**: youtube_mentions, youtube_views
- **ç¤¾åŒºæƒ…ç»ª**: community_sentiment
- **æ—¶é—´**: snapshot_time, created_at, updated_at

**ç´¢å¼•**:
```sql
CREATE INDEX idx_social_project_time ON social_metrics(project_id, snapshot_time DESC);
```

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ (154æ¡æ•°æ®)

---

#### 3. onchain_metrics (é“¾ä¸Šæ•°æ®æŒ‡æ ‡)

**ç”¨é€”**: å­˜å‚¨é¡¹ç›®çš„é“¾ä¸Šæ•°æ®æ—¶åºå¿«ç…§

**å­—æ®µ** (20ä¸ª):
- **å¸‚å€¼æ•°æ®**: market_cap, price_usd, volume_24h
- **ä¾›åº”é‡**: total_supply, circulating_supply
- **æµåŠ¨æ€§**: liquidity_usd, tvl
- **æŒæœ‰è€…**: holder_count, top_10_holders_percentage
- **äº¤æ˜“**: transaction_count, transaction_volume, active_addresses, unique_wallets_24h
- **åˆçº¦**: contract_interactions, token_holders
- **æ—¶é—´**: snapshot_time, created_at, updated_at

**ç´¢å¼•**:
```sql
CREATE INDEX idx_onchain_project_time ON onchain_metrics(project_id, snapshot_time DESC);
```

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ (154æ¡æ•°æ®)

---

#### 4. ai_analysis (AIåˆ†æç»“æœ)

**ç”¨é€”**: å­˜å‚¨AIå¯¹é¡¹ç›®çš„æ·±åº¦åˆ†æç»“æœ

**å­—æ®µ** (21ä¸ª):
- **æ–‡æœ¬åˆ†æ**: whitepaper_summary, key_features (JSON), similar_projects (JSON)
- **è¯„åˆ†**: tech_innovation_score, team_background_score, market_potential_score
- **æƒ…æ„Ÿ**: sentiment_score, sentiment_label
- **é£é™©**: risk_flags (JSON), risk_factors (JSON), scam_probability
- **å»ºè®®**: investment_suggestion, position_size, entry_timing, stop_loss_percentage
- **æœºä¼š**: opportunities (JSON)
- **æ€»ç»“**: summary
- **æ—¶é—´**: analyzed_at, created_at, updated_at

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ (75æ¡æ•°æ®)

---

### AIç³»ç»Ÿè¡¨

#### 6. ai_configs (AIé…ç½®)

**ç”¨é€”**: å­˜å‚¨AIæœåŠ¡æä¾›å•†çš„é…ç½®

**å­—æ®µ** (7ä¸ª):
- id, name, api_key (åŠ å¯†), enabled, model, created_at, updated_at

**æ”¯æŒçš„AI**: OpenAI, Anthropic, DeepSeek

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ (3æ¡é…ç½®)

---

#### 7. ai_work_config (AIå·¥ä½œé…ç½®)

**ç”¨é€”**: é…ç½®AIè‡ªåŠ¨åŒ–å·¥ä½œå‚æ•°

**å­—æ®µ** (13ä¸ª):
- **ç›®æ ‡è®¾ç½®**: primary_goal, target_roi, risk_tolerance
- **è¯„åˆ†é˜ˆå€¼**: min_ai_score, min_market_cap, max_market_cap
- **æ•°é‡é™åˆ¶**: max_projects_per_day, max_kols_per_day
- **ç±»åˆ«è¿‡æ»¤**: preferred_categories (JSON), excluded_categories (JSON)
- **éªŒè¯è§„åˆ™**: required_cross_validation, min_platforms
- **æ—¶é—´é™åˆ¶**: search_lookback_hours, project_age_limit_days
- **è‡ªå®šä¹‰è§„åˆ™**: rules (JSON)

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ

---

#### 8. ai_learning_feedback (AIå­¦ä¹ åé¦ˆ)

**ç”¨é€”**: æ”¶é›†ç”¨æˆ·å¯¹AIæ¨èçš„åé¦ˆï¼Œç”¨äºæ¨¡å‹ä¼˜åŒ–

**å­—æ®µ** (9ä¸ª):
- feedback_type, user_decision, reason, related_project_id, related_kol_id
- feedback_value, user_reason, ai_should_adjust, adjustment_applied
- created_at

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ

---

### é¢„æµ‹ä¸æŠ•èµ„è¡¨

#### 9. token_launch_predictions (ä»£å¸å‘å¸é¢„æµ‹)

**ç”¨é€”**: é¢„æµ‹é¡¹ç›®å‘å¸æ¦‚ç‡å’Œæ—¶é—´

**å­—æ®µ** (15ä¸ª):
- **é¢„æµ‹ç»“æœ**: launch_probability (0-100), confidence, estimated_timeline
- **ä¿¡å·æ£€æµ‹**: detected_signals (JSON), signal_count
- **ä¿¡å·è¯¦æƒ…**: has_snapshot_announced, has_tokenomics_published, has_points_system, has_audit_completed, has_mainnet_live, has_roadmap_token_mention
- **æ—¶é—´**: predicted_at, updated_at

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ

---

#### 10. airdrop_value_estimates (ç©ºæŠ•ä»·å€¼ä¼°ç®—)

**ç”¨é€”**: ä¼°ç®—é¡¹ç›®ç©ºæŠ•çš„ä»·å€¼

**å­—æ®µ** (14ä¸ª):
- **ä¼°ç®—ç»“æœ**: estimated_value_usd, estimated_value_cny
- **ä»·å€¼åŒºé—´**: min_value_usd, max_value_usd
- **ç½®ä¿¡åº¦**: confidence
- **å‚è€ƒæ•°æ®**: reference_category, historical_avg, comparable_projects (JSON)
- **è°ƒæ•´å› å­**: tvl_adjustment, funding_adjustment, final_adjustment
- **ä¾æ®**: basis
- **æ—¶é—´**: estimated_at, updated_at

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ

---

#### 11. investment_action_plans (æŠ•èµ„è¡ŒåŠ¨è®¡åˆ’)

**ç”¨é€”**: AIç”Ÿæˆçš„æŠ•èµ„è¡ŒåŠ¨è®¡åˆ’

**å­—æ®µ** (21ä¸ª):
- **é¡¹ç›®ä¿¡æ¯**: project_id, project_tier, composite_score
- **é¢„ç®—**: total_budget, budget_breakdown (JSON)
- **æ—¶é—´**: start_date, target_duration, urgency
- **æ”¶ç›Š**: expected_roi, airdrop_estimate
- **è¡ŒåŠ¨**: action_steps (JSON), total_steps
- **ç›‘æ§**: monitoring_metrics (JSON), alert_conditions (JSON)
- **é£é™©**: risks (JSON), stop_loss_conditions (JSON)
- **çŠ¶æ€**: status, completion_percentage
- **æ—¶é—´**: created_at, updated_at

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ

---

#### 12. project_discoveries (é¡¹ç›®å‘ç°)

**ç”¨é€”**: è®°å½•ä»å„å¹³å°å‘ç°çš„æ–°é¡¹ç›®

**å­—æ®µ** (20ä¸ª):
- **é¡¹ç›®**: project_name, project_id (å¯é€‰)
- **å‘ç°æ•°æ®**: total_mentions, platform_mentions (JSON), num_platforms
- **ä¿¡å·**: signal_strength, heat_score
- **æ—¶é—´**: first_discovered_at, last_mentioned_at, discovered_at
- **çƒ­åº¦**: mentions_24h, mentions_7d, growth_rate, is_trending
- **çªå‘**: is_surge, surge_ratio
- **çŠ¶æ€**: has_token, discovery_status
- **æ ·æœ¬**: mention_samples (JSON), platforms (JSON)

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ

---

### KOLç®¡ç†è¡¨

#### 13. kols (KOLåˆ—è¡¨)

**ç”¨é€”**: å­˜å‚¨Web3 KOLçš„å®Œæ•´ä¿¡æ¯

**å­—æ®µ** (24ä¸ª):
- **åŸºç¡€**: id, platform, username, display_name
- **ç¤¾äº¤æ•°æ®**: followers, following, tweets_count, account_created_at
- **å½±å“åŠ›**: tier (1-3), influence_score, avg_engagement_rate
- **æ ‡ç­¾**: tags (JSON)
- **æåŠ**: total_mentions, this_week_mentions
- **å‘ç°**: discovery_method, discovered_at, discovered_by
- **è¯„ä¼°**: prediction_accuracy, quality_score
- **çŠ¶æ€**: status, is_verified
- **æ—¶é—´**: last_checked_at, last_updated_at, created_at

**ç´¢å¼•**:
```sql
CREATE UNIQUE INDEX ON kols(username);
CREATE INDEX idx_kols_tier ON kols(tier);
CREATE INDEX idx_kols_status ON kols(status);
```

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ (15ä¸ªKOL)

---

#### 14. kols_pending (å¾…å®¡æ ¸KOL)

**ç”¨é€”**: AIæ¨èçš„å¾…å®¡æ ¸KOLé˜Ÿåˆ—

**å­—æ®µ** (18ä¸ª):
- åŒ…å«kolsè¡¨çš„å¤§éƒ¨åˆ†å­—æ®µ
- **AIæ¨è**: ai_recommendation_score, ai_recommendation_reason
- **æ¥æº**: ai_discovery_method, source_tweet_id, source_context
- **å®¡æ ¸**: review_status, reviewed_by, reviewed_at, reject_reason

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ

---

#### 15. kol_performances (KOLè¡¨ç°)

**ç”¨é€”**: è¿½è¸ªKOLçš„å†å²æ¨èè¡¨ç°

**å­—æ®µ** (10ä¸ª):
- kol_id, predicted_project, prediction_date, did_succeed
- tweet_id, likes, retweets, replies
- evaluation_period_start, evaluation_period_end

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ

---

### å®¡æ ¸ç³»ç»Ÿè¡¨

#### 16. projects_pending (å¾…å®¡æ ¸é¡¹ç›®)

**ç”¨é€”**: AIæ¨èçš„å¾…å®¡æ ¸é¡¹ç›®é˜Ÿåˆ—

**å­—æ®µ** (24ä¸ª):
- åŒ…å«projectsè¡¨çš„å¤§éƒ¨åˆ†å­—æ®µ
- **AIè¯„åˆ†**: ai_score, ai_grade, ai_confidence
- **AIè¯¦ç»†è¯„åˆ†**: ai_team_score, ai_tech_score, ai_community_score, ai_tokenomics_score, ai_market_score, ai_risk_score
- **AIæ¨è**: ai_recommendation_reason, ai_extracted_info (JSON)
- **æ¥æº**: source_url, source_content
- **å®¡æ ¸**: review_status, reviewed_by, reviewed_at, rejection_reason, reject_reason

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ (14æ¡å¾…å®¡æ ¸)

---

### å¹³å°ç›‘æ§è¡¨

#### 17. platform_search_rules (å¹³å°æœç´¢è§„åˆ™)

**ç”¨é€”**: é…ç½®å„å¹³å°çš„æœç´¢å’Œç›‘æ§è§„åˆ™

**å­—æ®µ** (13ä¸ª):
- platform, platform_name, enabled
- frequency_minutes, search_keywords (JSON), filters (JSON)
- monitor_kols, monitor_channels
- min_engagement, min_author_followers
- max_results_per_run, priority
- last_search_at, created_at, updated_at

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ

---

#### 18. platform_daily_stats (å¹³å°æ—¥ç»Ÿè®¡)

**ç”¨é€”**: è®°å½•æ¯æ—¥å„å¹³å°çš„æ•°æ®é‡‡é›†ç»Ÿè®¡

**å­—æ®µ** (10ä¸ª):
- platform, stat_date, data_collected
- kols_discovered, projects_recommended
- projects_approved, projects_rejected
- collections, errors_count
- created_at, updated_at

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ

---

#### 19. twitter_keywords (Twitterå…³é”®è¯)

**ç”¨é€”**: Twitteræœç´¢å…³é”®è¯åº“

**å­—æ®µ** (9ä¸ª):
- keyword, priority (1-3), weight
- search_count, hit_count, match_count
- last_used_at, last_matched_at
- created_at, updated_at

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ

---

#### 20. telegram_channels (Telegramé¢‘é“)

**ç”¨é€”**: Telegramç›‘æ§é¢‘é“åˆ—è¡¨

**å­—æ®µ** (10ä¸ª):
- channel_id, channel_username, channel_title, channel_type
- member_count, description
- is_official, quality_score
- last_monitored_at, last_checked_at, created_at, updated_at

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ

---

#### 21. discord_servers (DiscordæœåŠ¡å™¨)

**ç”¨é€”**: Discordç›‘æ§æœåŠ¡å™¨åˆ—è¡¨

**å­—æ®µ** (12ä¸ª):
- server_id, server_name, invite_link
- member_count, online_count
- related_project, description
- is_official, activity_score
- joined_at, last_monitored_at, last_checked_at
- created_at, updated_at

**å®ç°çŠ¶æ€**: âœ… å®Œæˆ

---

## ğŸ”— æ•°æ®å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   users     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1:N (ç®¡ç†å‘˜å®¡æ ¸)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ projects_pending â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   projects     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å®¡æ ¸é€šè¿‡  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚            â”‚             â”‚              â”‚
                         â”‚ 1:N        â”‚ 1:N         â”‚ 1:N          â”‚ 1:N
                         â–¼            â–¼             â–¼              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚social_metricsâ”‚ â”‚onchain_metricsâ”‚ â”‚ai_analysisâ”‚ â”‚project_discoveriesâ”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â”‚ 1:N
                                                     â–¼
                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                          â”‚token_launch_predictionsâ”‚
                                          â”‚airdrop_value_estimatesâ”‚
                                          â”‚investment_action_plansâ”‚
                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ kols_pending â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   kols     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å®¡æ ¸é€šè¿‡  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚ 1:N
                                 â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚ kol_performances â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ platform_search_   â”‚
â”‚ rules              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ é…ç½®
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ twitter_keywords   â”‚
â”‚ telegram_channels  â”‚
â”‚ discord_servers    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ é‡‡é›†æ•°æ®
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚platform_daily_statsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” ç´¢å¼•ç­–ç•¥

### æ ¸å¿ƒè¡¨ç´¢å¼•

```sql
-- projects è¡¨
CREATE INDEX idx_projects_grade ON projects(grade);
CREATE INDEX idx_projects_score ON projects(overall_score DESC);
CREATE INDEX idx_projects_blockchain ON projects(blockchain);
CREATE INDEX idx_projects_category ON projects(category);
CREATE INDEX idx_projects_discovered_at ON projects(first_discovered_at DESC);

-- social_metrics å’Œ onchain_metrics
CREATE INDEX idx_social_project_time ON social_metrics(project_id, snapshot_time DESC);
CREATE INDEX idx_onchain_project_time ON onchain_metrics(project_id, snapshot_time DESC);

-- kols è¡¨
CREATE UNIQUE INDEX ON kols(username);
CREATE INDEX idx_kols_tier ON kols(tier);
CREATE INDEX idx_kols_status ON kols(status);
CREATE INDEX idx_kols_username ON kols(username);

-- platform_search_rules
CREATE INDEX idx_platform_rules_enabled ON platform_search_rules(enabled, platform);
```

---

## ğŸ“Š æŸ¥è¯¢ä¼˜åŒ–ç¤ºä¾‹

### 1. è·å–Sçº§é¡¹ç›®åŠå…¶æœ€æ–°æŒ‡æ ‡

```sql
SELECT
    p.*,
    sm.twitter_followers,
    sm.telegram_members,
    om.market_cap,
    om.tvl_usd
FROM projects p
LEFT JOIN LATERAL (
    SELECT * FROM social_metrics
    WHERE project_id = p.id
    ORDER BY snapshot_time DESC
    LIMIT 1
) sm ON true
LEFT JOIN LATERAL (
    SELECT * FROM onchain_metrics
    WHERE project_id = p.id
    ORDER BY snapshot_time DESC
    LIMIT 1
) om ON true
WHERE p.grade = 'S'
ORDER BY p.overall_score DESC;
```

### 2. è·å–å¾…å®¡æ ¸é¡¹ç›®åˆ—è¡¨

```sql
SELECT
    pp.*,
    u.username as reviewer_name
FROM projects_pending pp
LEFT JOIN users u ON u.id = pp.reviewed_by
WHERE pp.review_status = 'pending'
ORDER BY pp.ai_score DESC, pp.submitted_at ASC;
```

### 3. KOLè¡¨ç°æ’è¡Œæ¦œ

```sql
SELECT
    k.username,
    k.followers,
    k.influence_score,
    k.this_week_mentions,
    k.prediction_accuracy,
    COUNT(kp.id) as total_predictions
FROM kols k
LEFT JOIN kol_performances kp ON kp.kol_id = k.id
WHERE k.status = 'active'
GROUP BY k.id
ORDER BY k.influence_score DESC, k.prediction_accuracy DESC
LIMIT 20;
```

---

## ğŸ” æ•°æ®å®‰å…¨

### åŠ å¯†å­—æ®µ
- `ai_configs.api_key` - ä½¿ç”¨FernetåŠ å¯†
- `users.password_hash` - bcryptå“ˆå¸Œ

### å¤‡ä»½ç­–ç•¥
- æ¯æ—¥å…¨é‡å¤‡ä»½
- WALå½’æ¡£å¯ç”¨
- ä¿ç•™30å¤©å†å²å¤‡ä»½

---

## ğŸ“ˆ æ•°æ®åº“æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | å½“å‰å€¼ | ç›®æ ‡å€¼ |
|------|--------|--------|
| è¡¨æ•°é‡ | 22 | - |
| æ€»æ•°æ®é‡ | 1.8 MB | <100 MB |
| æœ€å¤§è¡¨å¤§å° | 384 KB (projects) | <10 MB |
| ç´¢å¼•æ•°é‡ | ~40 | - |
| æŸ¥è¯¢å“åº”æ—¶é—´ | <100ms | <200ms |
| è¿æ¥æ± å¤§å° | 20 | 20-50 |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0 (å®Œæ•´ç‰ˆ)
**æœ€åæ›´æ–°**: 2025-10-13
**ç»´æŠ¤äºº**: æŠ€æœ¯å›¢é˜Ÿ
