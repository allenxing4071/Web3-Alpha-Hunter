# ğŸ” æ•°æ®é‡‡é›†é—®é¢˜è¯Šæ–­æŠ¥å‘Š

**è¯Šæ–­æ—¶é—´**: 2025-01-07  
**é—®é¢˜**: ç®¡ç†é¢æ¿æ˜¾ç¤ºæ‰€æœ‰å¹³å°æ•°æ®ä¸º0  

---

## âŒ å‘ç°çš„é—®é¢˜

### 1ï¸âƒ£ **Twitter APIæœªé…ç½®**
```
WARNING | Twitter Bearer Token not configured
WARNING | Twitter client not available
Result: 0 tweets collected
```

**å½±å“**: æ— æ³•é‡‡é›†Twitteræ•°æ®

### 2ï¸âƒ£ **Telegram APIæœªé…ç½®**
```
WARNING | Telegram API credentials not configured
```

**å½±å“**: æ— æ³•é‡‡é›†Telegramæ•°æ®

### 3ï¸âƒ£ **æ•°æ®åº“æ— æ•°æ®**
```sql
SELECT COUNT(*) FROM projects;
-- ç»“æœ: 0
```

**å½±å“**: æ²¡æœ‰ä»»ä½•é¡¹ç›®æ•°æ®

### 4ï¸âƒ£ **å¹³å°ç»Ÿè®¡è¡¨ç¼ºå¤±**
```sql
SELECT name FROM sqlite_master WHERE type='table' AND name LIKE 'platform%';
-- ç»“æœ: ç©º
```

**å½±å“**: æ— æ³•è®°å½•å¹³å°é‡‡é›†ç»Ÿè®¡

---

## âœ… æ­£å¸¸è¿è¡Œçš„éƒ¨åˆ†

### 1. Celery Worker & Beat æ­£å¸¸
- âœ… Workerè¿›ç¨‹: è¿è¡Œä¸­ (12ä¸ªå­è¿›ç¨‹)
- âœ… Beatè¿›ç¨‹: è¿è¡Œä¸­ (å®šæ—¶è°ƒåº¦æ­£å¸¸)
- âœ… ä»»åŠ¡è°ƒåº¦: æ¯5åˆ†é’Ÿè§¦å‘Twitteré‡‡é›†
- âœ… ä»»åŠ¡æ‰§è¡Œ: ä»»åŠ¡è¢«æ¥æ”¶å¹¶æ‰§è¡Œ

### 2. CoinGeckoé‡‡é›†å™¨æ­£å¸¸åˆå§‹åŒ–
```
âœ… CoinGecko collector initialized
```

---

## ğŸ”§ é—®é¢˜æ ¹æœ¬åŸå› 

### æ ¸å¿ƒé—®é¢˜çŸ©é˜µ:

| æ•°æ®æº | APIé…ç½® | é‡‡é›†å™¨çŠ¶æ€ | æ•°æ®é‡ | é—®é¢˜ |
|--------|---------|------------|--------|------|
| Twitter | âŒ æœªé…ç½® | âš ï¸ Mockæ¨¡å¼ | 0 | API Tokenç¼ºå¤± |
| Telegram | âŒ æœªé…ç½® | âš ï¸ Mockæ¨¡å¼ | 0 | APIå‡­è¯ç¼ºå¤± |
| CoinGecko | âœ… æ­£å¸¸ | âœ… å·²åˆå§‹åŒ– | 0 | æœªæ‰§è¡Œé‡‡é›† |
| Discord | â“ æœªçŸ¥ | â“ æœªçŸ¥ | 0 | æœªæ£€æŸ¥ |

---

## ğŸ“‹ å½“å‰ç³»ç»Ÿæµç¨‹

```
Celery Beat (è°ƒåº¦å™¨)
    â†“
æ¯5åˆ†é’Ÿå‘é€ä»»åŠ¡ â†’ app.tasks.collectors.collect_twitter_data
    â†“
Celery Workeræ¥æ”¶ä»»åŠ¡
    â†“
è°ƒç”¨ twitter_collector.collect_and_extract()
    â†“
æ£€æŸ¥: Twitter Bearer Token
    â†“
âŒ æœªé…ç½® â†’ è¿”å›ç©ºç»“æœ
    â†“
ä»»åŠ¡æˆåŠŸä½†æ— æ•°æ®: {'projects_found': 0, 'projects_saved': 0}
```

---

## ğŸ¯ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆA: é…ç½®çœŸå®APIå¯†é’¥ (æ¨è)

#### 1. Twitter APIé…ç½®
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export TWITTER_BEARER_TOKEN="your_bearer_token_here"

# æˆ–åœ¨æ•°æ®åº“ä¸­é…ç½® (å·²æœ‰AIé…ç½®è¡¨ç»“æ„)
```

**è·å–Twitter APIå¯†é’¥**:
1. è®¿é—® https://developer.twitter.com/
2. åˆ›å»ºApp
3. è·å– Bearer Token
4. åœ¨ç®¡ç†é¢æ¿ â†’ AIé…ç½® â†’ æ·»åŠ Twitteré…ç½®

#### 2. Telegram APIé…ç½®
```bash
export TELEGRAM_API_ID="your_api_id"
export TELEGRAM_API_HASH="your_api_hash"
export TELEGRAM_PHONE="your_phone_number"
```

**è·å–Telegram APIå¯†é’¥**:
1. è®¿é—® https://my.telegram.org/apps
2. åˆ›å»ºåº”ç”¨è·å– API ID å’Œ API Hash

#### 3. é‡å¯CeleryæœåŠ¡
```bash
# åœ¨ç®¡ç†é¢æ¿ç‚¹å‡»:
1. åœæ­¢ Worker
2. åœæ­¢ Beat
3. å¯åŠ¨ Worker
4. å¯åŠ¨ Beat
```

---

### æ–¹æ¡ˆB: åˆ›å»ºå¹³å°ç»Ÿè®¡è¡¨ (å¿…éœ€)

```sql
-- åˆ›å»ºå¹³å°æœç´¢è§„åˆ™è¡¨
CREATE TABLE IF NOT EXISTS platform_search_rules (
    platform TEXT PRIMARY KEY,
    enabled BOOLEAN DEFAULT true,
    priority INTEGER DEFAULT 5,
    frequency_minutes INTEGER DEFAULT 5,
    search_keywords JSON,
    min_engagement INTEGER DEFAULT 10,
    min_author_followers INTEGER DEFAULT 500,
    max_results_per_run INTEGER DEFAULT 100,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- åˆ›å»ºå¹³å°æ¯æ—¥ç»Ÿè®¡è¡¨
CREATE TABLE IF NOT EXISTS platform_daily_stats (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    platform TEXT NOT NULL,
    stat_date DATE NOT NULL,
    data_collected INTEGER DEFAULT 0,
    projects_discovered INTEGER DEFAULT 0,
    kols_discovered INTEGER DEFAULT 0,
    projects_recommended INTEGER DEFAULT 0,
    projects_approved INTEGER DEFAULT 0,
    projects_rejected INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(platform, stat_date)
);

-- æ’å…¥åˆå§‹é…ç½®
INSERT OR IGNORE INTO platform_search_rules (platform, enabled, frequency_minutes) 
VALUES 
    ('twitter', true, 5),
    ('telegram', true, 15),
    ('discord', true, 30);
```

---

### æ–¹æ¡ˆC: ä½¿ç”¨CoinGeckoä½œä¸ºåˆå§‹æ•°æ®æº (å¿«é€Ÿæµ‹è¯•)

CoinGeckoä¸éœ€è¦APIå¯†é’¥ï¼ˆå…è´¹APIï¼‰ï¼Œå¯ä»¥ç«‹å³é‡‡é›†æ•°æ®ï¼š

```bash
# æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡CoinGeckoé‡‡é›†
curl -X POST http://localhost:8000/api/v1/admin/collect/coingecko
```

---

## ğŸ“Š éªŒè¯æ­¥éª¤

### 1. é…ç½®APIåéªŒè¯
```bash
# æ£€æŸ¥Twitteré…ç½®
echo $TWITTER_BEARER_TOKEN

# æ‰‹åŠ¨è§¦å‘é‡‡é›†æµ‹è¯•
curl -X POST http://localhost:8000/api/v1/platforms/twitter/collect
```

### 2. æŸ¥çœ‹æ—¥å¿—
```bash
# Workeræ—¥å¿—
tail -f /tmp/celery_worker.log | grep -E "collect|Twitter|é¡¹ç›®"

# Beatæ—¥å¿—  
tail -f /tmp/celery_beat.log | grep "Scheduler"
```

### 3. æ£€æŸ¥æ•°æ®åº“
```bash
# æŸ¥çœ‹é¡¹ç›®æ•°
sqlite3 web3hunter.db "SELECT COUNT(*) FROM projects;"

# æŸ¥çœ‹å¹³å°ç»Ÿè®¡
sqlite3 web3hunter.db "SELECT * FROM platform_daily_stats WHERE stat_date = date('now');"
```

---

## âš¡ å¿«é€Ÿè¡ŒåŠ¨è®¡åˆ’

### ç«‹å³æ‰§è¡Œ (5åˆ†é’Ÿå†…):

1. **åˆ›å»ºæ•°æ®åº“è¡¨**
   ```bash
   cd /Users/xinghailong/Documents/soft/faxianjihui/backend
   sqlite3 web3hunter.db < scripts/create_platform_tables.sql
   ```

2. **æµ‹è¯•CoinGeckoé‡‡é›†** (æ— éœ€APIå¯†é’¥)
   ```bash
   curl -X POST http://localhost:8000/api/v1/admin/collect/coingecko
   ```

3. **ç­‰å¾…30ç§’åæ£€æŸ¥**
   ```bash
   sqlite3 web3hunter.db "SELECT COUNT(*) FROM projects;"
   ```

### çŸ­æœŸæ‰§è¡Œ (1å°æ—¶å†…):

4. **ç”³è¯·Twitter Developerè´¦å·**
5. **é…ç½®Twitter APIå¯†é’¥**
6. **é‡å¯CeleryæœåŠ¡**
7. **è§‚å¯Ÿæ•°æ®é‡‡é›†**

---

## ğŸ“ˆ é¢„æœŸç»“æœ

### é…ç½®å®Œæˆå:

| å¹³å° | é‡‡é›†é¢‘ç‡ | é¢„æœŸæ•°æ®é‡/å¤© |
|------|----------|---------------|
| Twitter | æ¯5åˆ†é’Ÿ | 50-200ä¸ªé¡¹ç›® |
| Telegram | æ¯15åˆ†é’Ÿ | 20-100ä¸ªé¡¹ç›® |
| CoinGecko | æ¯30åˆ†é’Ÿ | 10-50ä¸ªé¡¹ç›® |
| Discord | æ¯30åˆ†é’Ÿ | 5-30ä¸ªé¡¹ç›® |

### ç®¡ç†é¢æ¿æ˜¾ç¤º:

```
Twitter/X:
- é‡‡é›†æ•°æ®: 156
- å‘ç°é¡¹ç›®: 23
- å‘ç°KOL: 12
- AIæ¨è: 8

Telegram:
- é‡‡é›†æ•°æ®: 89
- å‘ç°é¡¹ç›®: 15
- å‘ç°KOL: 0
- AIæ¨è: 5
```

---

## ğŸ¯ æ€»ç»“

**å½“å‰çŠ¶æ€**: ğŸŸ¡ ç³»ç»Ÿæ¶æ„å®Œæ•´ï¼Œä½†ç¼ºå°‘APIé…ç½®å’Œæ•°æ®

**æ ¸å¿ƒé—®é¢˜**: 
1. âŒ Twitter/Telegram APIæœªé…ç½®
2. âŒ å¹³å°ç»Ÿè®¡è¡¨ç¼ºå¤±
3. âŒ æ•°æ®åº“æ— åˆå§‹æ•°æ®

**è§£å†³ä¼˜å…ˆçº§**:
1. **P0**: åˆ›å»ºplatformç»Ÿè®¡è¡¨ (ç«‹å³)
2. **P0**: æµ‹è¯•CoinGeckoé‡‡é›† (ç«‹å³)
3. **P1**: é…ç½®Twitter API (1å°æ—¶å†…)
4. **P2**: é…ç½®Telegram API (æŒ‰éœ€)

**é¢„è®¡æ¢å¤æ—¶é—´**: 5åˆ†é’Ÿ (CoinGecko) + 1å°æ—¶ (Twitter)

