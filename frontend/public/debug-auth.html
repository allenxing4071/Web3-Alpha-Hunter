<!DOCTYPE html>
<html>
<head>
    <title>è®¤è¯ä¿¡æ¯è°ƒè¯•</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1a1a2e;
            color: #fff;
        }
        .section {
            background: #16213e;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        .key {
            color: #4ade80;
            font-weight: bold;
        }
        .value {
            color: #60a5fa;
        }
        pre {
            background: #0f1419;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ” è®¤è¯ä¿¡æ¯è°ƒè¯•</h1>
    
    <div class="section">
        <h2>sessionStorage å†…å®¹:</h2>
        <div id="sessionStorage"></div>
    </div>
    
    <div class="section">
        <h2>localStorage å†…å®¹:</h2>
        <div id="localStorage"></div>
    </div>
    
    <div class="section">
        <h2>éªŒè¯ç»“æœ:</h2>
        <div id="validation"></div>
    </div>

    <script>
        // æ˜¾ç¤º sessionStorage
        const sessionDiv = document.getElementById('sessionStorage');
        let sessionHTML = '';
        for (let i = 0; i < sessionStorage.length; i++) {
            const key = sessionStorage.key(i);
            const value = sessionStorage.getItem(key);
            sessionHTML += `<div><span class="key">${key}:</span> <span class="value">${value}</span></div>`;
        }
        sessionDiv.innerHTML = sessionHTML || '<div style="color: #ef4444;">Empty</div>';

        // æ˜¾ç¤º localStorage
        const localDiv = document.getElementById('localStorage');
        let localHTML = '';
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            const value = localStorage.getItem(key);
            localHTML += `<div><span class="key">${key}:</span> <span class="value">${value}</span></div>`;
        }
        localDiv.innerHTML = localHTML || '<div style="color: #ef4444;">Empty</div>';

        // éªŒè¯
        const validationDiv = document.getElementById('validation');
        const token = sessionStorage.getItem('auth_token');
        const userStr = sessionStorage.getItem('auth_user');
        
        let validationHTML = '<pre>';
        validationHTML += `auth_token: ${token}\n`;
        validationHTML += `auth_token === 'authenticated': ${token === 'authenticated'}\n`;
        validationHTML += `auth_user: ${userStr}\n`;
        
        if (userStr) {
            try {
                const user = JSON.parse(userStr);
                validationHTML += `\nParsed user:\n${JSON.stringify(user, null, 2)}\n`;
                validationHTML += `\nRole: ${user.role}\n`;
                validationHTML += `Is Admin: ${user.role === 'admin'}\n`;
            } catch (e) {
                validationHTML += `\nParse Error: ${e.message}\n`;
            }
        }
        
        validationHTML += '\n=== éªŒè¯ç»“æœ ===\n';
        if (!token || token !== 'authenticated' || !userStr) {
            validationHTML += 'âŒ éªŒè¯å¤±è´¥: ç¼ºå°‘è®¤è¯ä¿¡æ¯\n';
        } else {
            try {
                const user = JSON.parse(userStr);
                if (user.role !== 'admin') {
                    validationHTML += 'âŒ éªŒè¯å¤±è´¥: éç®¡ç†å‘˜ç”¨æˆ·\n';
                } else {
                    validationHTML += 'âœ… éªŒè¯é€šè¿‡: ç®¡ç†å‘˜ç”¨æˆ·\n';
                }
            } catch (e) {
                validationHTML += 'âŒ éªŒè¯å¤±è´¥: ç”¨æˆ·ä¿¡æ¯è§£æé”™è¯¯\n';
            }
        }
        validationHTML += '</pre>';
        
        validationDiv.innerHTML = validationHTML;
    </script>
</body>
</html>
